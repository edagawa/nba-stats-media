<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ player_name }} | 選手スタッツ比較</title>
    {% include '_gtm_head.html' %}
    <link rel="stylesheet" href="{{ base_path }}/css/style.css">
</head>
<body>
    {% include '_gtm_body.html' %}
    <header>
        <h1>{{ player_name }}</h1>
        <nav>
            <a href="{{ base_path }}/index.html">トップページ</a>
        </nav>
    </header>
    <div class="container">
        <main>
            <div class="breadcrumb">
                <a href="{{ base_path }}/index.html">トップページ</a> &gt; <a href="{{ team_url }}">{{ team_name }}</a> &gt; <span>{{ player_name }}</span>
            </div>
            <section class="team-profile">
                <div class="team-details">
                    <h3>選手情報 (2024-25)</h3>
                    <ul>
                        <li><strong>チーム:</strong> {{ player_info.Team | default('N/A') }}</li>
                    </ul>
                </div>
            </section>

            <h2>シーズン比較: 2023-24 vs 2024-25</h2>
            <section class="comparison-graph">
                <h3>主要指標の変化</h3>
                <figure>
                    <img src="{{ base_path }}/images/players/comparison_{{ player_filename }}.svg" alt="{{ player_name }} シーズン比較グラフ" onerror="this.style.display='none'">
                </figure>
            </section>
            <div class="seasons-container">
                <div class="season-card">
                    <h3>2023-24シーズン</h3>
                    {{ stats_s1|safe }}
                </div>
                <div class="season-card">
                    <h3>2024-25シーズン</h3>
                    {{ stats_s2|safe }}
                </div>
            </div>

            {% if has_timeline_24_25 %}
            <section class="timeline-graph">
                <h2>時間帯別得点パターン (2024-25)</h2>
                <p class="graph-description">このグラフは、{{ player_name }}選手の2024-25シーズンにおける、試合中の時間経過（1分ごと）に伴う得点の内訳（FT, 2PT, 3PT）を示しています。</p>
                <figure>
                    <img id="points-24-25-graph" src="{{ base_path }}/images/players/timeline_stacked_24-25_{{ player_filename }}.svg" alt="{{ player_name }} 2024-25 得点タイムライン">
                </figure>
                <div class="player-comment">{{ comment_24_25 }}</div>
            </section>
            {% endif %}

            {% if has_timeline_23_24 %}
            <section class="timeline-graph">
                <h2>時間帯別得点パターン (2023-24)</h2>
                <p class="graph-description">このグラフは、{{ player_name }}選手の2023-24シーズンにおける、試合中の時間経過（1分ごと）に伴う得点の内訳（FT, 2PT, 3PT）を示しています。</p>
                <figure>
                    <img id="points-23-24-graph" src="{{ base_path }}/images/players/timeline_stacked_23-24_{{ player_filename }}.svg" alt="{{ player_name }} 2023-24 得点タイムライン">
                </figure>
                <div class="player-comment">{{ comment_23_24 }}</div>
            </section>
            {% endif %}
            
            {% if has_timeline_comparison %}
            <section class="timeline-comparison-section">
                <h2>時間帯別得点パターンのシーズン比較 (24-25 vs 23-24)</h2>
                
                <div class="timeline-graph">
                    <h3>得点差（実数）</h3>
                    <p class="graph-description">2024-25シーズンと2023-24シーズンの1分毎の得点差を比較します。プラスの値は24-25シーズンの方が得点が多いことを示します。</p>
                    <figure>
                        <img src="{{ base_path }}/images/players/timeline_diff_abs_{{ player_filename }}.svg" alt="{{ player_name }} 得点差 比較">
                    </figure>
                </div>

                <div class="timeline-graph">
                    <h3>得点増減率 (%)</h3>
                    <p class="graph-description">2024-25シーズンの得点が2023-24シーズンからどのくらい変化したかをパーセンテージで示します。</p>
                    <figure>
                        <img src="{{ base_path }}/images/players/timeline_diff_pct_{{ player_filename }}.svg" alt="{{ player_name }} 得点増減率 比較">
                    </figure>
                </div>
            </section>
            {% endif %}
            <div id="graphModal" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <img id="modalImage" src="" alt="拡大グラフ">
                </div>
            </div>
        </main>
    </div>
    {% include 'footer.html' %}
    
    <script src="{{ base_path }}/js/modal.js"></script>
</body>
</html>